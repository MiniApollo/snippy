#+Title: How to write a snippet engine
#+AUTHOR: MiniApollo5935
#+Startup: showeverything
#+Options: toc:2


* Table Of Contents :toc:
- [[#bevezetés][Bevezetés]]
- [[#átfogó-működés][Átfogó működés]]
  - [[#pattern-matching-campf][Pattern matching campf]]
  - [[#snippet-expanding-snippet-engine][Snippet expanding (snippet engine)]]

* Bevezetés
Friendly-snippets. Vscode alapúak
https://github.com/rafamadriz/friendly-snippets

mappa struktura:
root/snippets/NYELV/NYELV.json

JSON formátúmban van:
/snippets/c/c.json
#+begin_src javascript
    "Starter Template": {
        "prefix": "st",
        "body": [
            "#include <stdbool.h>",
            "#include <stdio.h>",
            "#include <stdlib.h>",
            "",
            "int main(int argc, char *argv[])",
            "{$0",
            "\treturn EXIT_SUCCESS;",
            "}"
        ],
        "description": "Standard starter template for a tiny C program"
    },
#+end_src

Egy object lista
- Snippet name
- Prefix: amiből ki fogja expand-elni
- Body: amire lecseréljük
- Description: Leírás annyira nem lényeges

* Átfogó működés
Lépések
Két csomag:
** Pattern matching campf
(Engem főleg ez zavar, hogy nem dobja fel)

Mikor a compleiton bekapcsol megkapjuk a szöveget amit eddig leírtak és megkeressük a legközelebbit
- ezt megtudja csinálni a completion engine
- Erre kell írni egy campf completion at point function-t (külön package)

Luasnip megmutatja:
- A snippet-et magát (csak simán ahogy oda van rakva stringként)
- A leírást is hozzá

** Snippet expanding (snippet engine)
Ez is zavar, mert nincs minden snippetre

Ez a fő lényeg
Lecseréljük a bufferben ahol van a szövegünk
Berakjuk a snippet-et

Működése:
- Beolvasni a szükséges nyelv snippetjeit per mode (JSON parser)
- Kikeresni a nevét a snippetnek
- expand
